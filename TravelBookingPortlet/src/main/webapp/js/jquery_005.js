(function(B){B("html").addClass("stylish-select");if(!Array.prototype.indexOf){Array.prototype.indexOf=function(G){if(this===void 0||this===null){throw new TypeError()}var H=Object(this);var J=H.length>>>0;if(J===0){return -1}var A=0;if(arguments.length>0){A=Number(arguments[1]);if(A!==A){A=0}else{if(A!==0&&A!==(1/0)&&A!==-(1/0)){A=(A>0||-1)*Math.floor(Math.abs(A))}}}if(A>=J){return -1}var I=A>=0?A:Math.max(J-Math.abs(A),0);for(;I<J;I++){if(I in H&&H[I]===G){return I}}return -1}}B.fn.extend({getSetSSValue:function(A){if(A){B(this).val(A).change();return this}else{return B(this).find(":selected").val()}},resetSS:function(){var A=B(this).data("ssOpts");$this=B(this);$this.next().remove();$this.unbind(".sSelect").sSelect(A)}});B.fn.sSelect=function(A){return this.each(function(){var r={defaultText:"Please select",animationSpeed:0,ddMaxHeight:"",containerClass:""};var o=B.extend(r,A),x=B(this),q=B('<div class="selectedTxt"></div>'),f=B('<div class="newListSelected '+o.containerClass+'"></div>'),t=B('<div class="SSContainerDivWrapper" style="visibility:hidden;"></div>'),AD=B('<ul class="newList"></ul>'),e=-1,y=-1,v=-1,n=[],m=false,k=false,AB;B(this).data("ssOpts",A);f.insertAfter(x);f.attr("tabindex",x.attr("tabindex")||"0");q.prependTo(f);AD.appendTo(f);AD.wrap(t);t=AD.parent();x.hide();q.data("ssReRender",!q.is(":visible"));if(x.children("optgroup").length==0){x.children().each(function(C){var E=B(this).html();var D=B(this).val();n.push(E.charAt(0).toLowerCase());if(B(this).attr("selected")=="selected"||B(this).attr("selected")==true){o.defaultText=E;y=v=C}AD.append(B('<li><a href="JavaScript:void(0);">'+E+"</a></li>").data("key",D))});AB=AD.children().children()}else{x.children("optgroup").each(function(){var C=B(this).attr("label"),E=B('<li class="newListOptionTitle">'+C+"</li>"),D=B("<ul></ul>");E.appendTo(AD);D.appendTo(E);B(this).children().each(function(){++e;var G=B(this).html();var F=B(this).val();n.push(G.charAt(0).toLowerCase());if(B(this).attr("selected")=="selected"||B(this).attr("selected")==true){o.defaultText=G;y=v=e}D.append(B('<li><a href="JavaScript:void(0);">'+G+"</a></li>").data("key",F))})});AB=AD.find("ul li a")}var d=AD.height(),l=f.height(),AC=AB.length;if(y!=-1){u(y)}else{q.text(o.defaultText)}function i(){var E=f.offset().top,D=B(window).height(),C=B(window).scrollTop();if(d>parseInt(o.ddMaxHeight)){d=parseInt(o.ddMaxHeight)}E=E-C;if(E+d>=D){AD.css({height:d});t.css({top:"-"+d+"px",height:d});x.onTop=true}else{AD.css({height:d});t.css({top:l+"px",height:d});x.onTop=false}}i();B(window).bind("resize.sSelect scroll.sSelect",i);function g(){f.css("position","relative")}function p(){f.css({position:"static"})}q.bind("click.sSelect",function(C){C.stopPropagation();if(B(this).data("ssReRender")){d=AD.height("").height();t.height("");l=f.height();B(this).data("ssReRender",false);i()}B(".SSContainerDivWrapper").not(B(this).next()).hide().parent().css("position","static").removeClass("newListSelFocus");t.toggle();g();if(y==-1){y=0}AB.eq(y).focus()});function z(C,D){if(C==true){v=y;x.change()}if(D==true){y=v;u(y)}t.hide();p()}AB.bind("click.sSelect",function(C){var D=B(C.target);y=AB.index(D);k=true;u(y,true);z()});AB.bind("mouseenter.sSelect",function(C){var D=B(C.target);D.addClass("newListHover")}).bind("mouseleave.sSelect",function(C){var D=B(C.target);D.removeClass("newListHover")});function u(G,C){if(G==-1){q.text(o.defaultText);AB.removeClass("hiLite")}else{AB.removeClass("hiLite").eq(G).addClass("hiLite");var D=AB.eq(G).text(),E=AB.eq(G).parent().data("key");try{x.val(E)}catch(F){x[0].selectedIndex=G}q.text(D);if(C==true){v=G;x.change()}if(t.is(":visible")){AB.eq(G).focus()}}}x.bind("change.sSelect",function(D){var E=B(D.target);if(k==true){k=false;return false}var C=E.find(":selected");y=E.find("option").index(C);u(y)});function h(C){B(C).unbind("keydown.sSelect").bind("keydown.sSelect",function(D){var E=D.which;k=true;switch(E){case 40:case 39:j();return false;break;case 38:case 37:AA();return false;break;case 33:case 36:w();return false;break;case 34:case 35:s();return false;break;case 13:case 27:z(true);return false;break}keyPressed=String.fromCharCode(E).toLowerCase();var F=n.indexOf(keyPressed);if(typeof F!="undefined"){++y;y=n.indexOf(keyPressed,y);if(y==-1||y==null||m!=keyPressed){y=n.indexOf(keyPressed)}u(y);m=keyPressed;return false}})}function j(){if(y<(AC-1)){++y;u(y)}}function AA(){if(y>0){--y;u(y)}}function w(){y=0;u(y)}function s(){y=AC-1;u(y)}f.bind("click.sSelect",function(C){C.stopPropagation();h(this)});f.bind("focus.sSelect",function(){B(this).addClass("newListSelFocus");h(this)});f.bind("blur.sSelect",function(){B(this).removeClass("newListSelFocus")});B(document).bind("click.sSelect",function(){f.removeClass("newListSelFocus");if(t.is(":visible")){z(false,true)}else{z(false)}});q.bind("mouseenter.sSelect",function(C){var D=B(C.target);D.parent().addClass("newListSelHover")}).bind("mouseleave.sSelect",function(C){var D=B(C.target);D.parent().removeClass("newListSelHover")});t.css({left:"0",display:"none",visibility:"visible"})})}})(jQuery);